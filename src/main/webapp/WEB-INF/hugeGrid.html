<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>大数据测试</title>
    <script charset="UTF-8" src="asset/jquery.js"></script>
    <script charset="UTF-8" src="asset/underscore.js"></script>
    <script charset="UTF-8" src="asset/hugeGrid/template-util.js"></script>
    <script charset="UTF-8" src="asset/hugeGrid/ouiGrid.js"></script>
    <script charset="UTF-8" src="asset/hugeGrid/testData.js"></script>
    <script charset="UTF-8" src="asset/hugeGrid/hugeGrid.js"></script>
    <style>
        .grid {
            font-family: "\5FAE\8F6F\96C5\9ED1",Arial,sans-serif;
            font-size: 13px;
            border: 1px solid #ececec;
        }
        .grid-view {
            position: relative;
            left: 0;
            top: 0;
            padding: 0;
        }
        .grid-hdiv {
            position: relative;
            overflow-x: hidden;
            border-bottom: 1px solid #e4e4e4;
        }
        .grid-hbox {
            float: left;
            padding-right: 20px;
        }
        .grid-htable th {
            padding: 0 2px;
            height: 30px;
            overflow: hidden;
            white-space: nowrap;
            text-align: center;
            color: #8895b4;
            background: #f7faff;
            border-right: 1px solid #e4e4e4;
        }

        .grid-bdiv {
            position: relative;
            overflow: auto;
            text-align: left;
        }
        .grid-btable td {
            padding: 2px 4px;
            height: 24px;
            color: #68728a;
            white-space: nowrap;
            text-align: left;
            border-right: 1px solid #e4e4e4;
            border-bottom: 1px solid #e4e4e4;
        }
        .grid-btable .firstrow td {
            padding: 0 2px 0 2px;
            height: 0;
            border-right: 1px solid;
            border-bottom: 0 none;
        }
    </style>

    <!--
        depends: [renderModel, gridInstance]
        renderModel = {
            colModel: [...],
            colName: [...]
        }
        gridInstance: {object}
    -->
    <script id="gridTemplate" type="text/template">
        [% var gridClass = gridInstance.gridClass(renderModel); %]
        [% var gridStyle = gridInstance.gridStyle(renderModel); %]
        <table class="[%= gridClass %]" style="[%= gridStyle %]">
            <thead>
                <tr>
                    [% if (renderModel.rowNumber) { %]
                    <td></td>
                    [% } %]
                    [% var colName = renderModel.colName; %]
                    [% var colModel = renderModel.colModel; %]
                    [% for (var key in colName) { %]
                    <td data-name="[%= colModel[key].name %]">[%= colName[key] %]</td>
                    [% } %]
                </tr>
            </thead>

            [% var bodyClass = gridInstance.bodyClass(renderModel); %]
            [% var bodyStyle = gridInstance.bodyStyle(renderModel); %]
            <tbody class="[%= bodyClass %]" style="[%= bodyStyle %]">
            <tr>
                [% if (renderModel.rowNumber) { %]
                <td></td>
                [% } %]
                [% colModel = renderModel.colModel; %]
                [% for (var j in colModel) { %]
                <td></td>
                [% } %]
            </tr>
            </tbody>
        </table>
    </script>

    <!--
        depends: [renderModel, gridInstance]
        renderModel = {
            colModel: [...],
            colName: [...]
        }
        gridInstance: {object}
    -->
    <script id="ouiGridTemplate" type="text/template">
        [% var gridClass = gridInstance.gridClass(renderModel); %]
        [% var gridStyle = gridInstance.gridStyle(renderModel); %]
        <div class="[%= gridClass %]" style="[%= gridStyle%]">
            <div class="grid-hdiv" style="width: 1170px;">
                <table class="htable" style="width: 1800px;">
                    <thead>
                        <tr>
                            [% if (renderModel.rowNumber) { %]
                            <td></td>
                            [% } %]
                            [% var colName = renderModel.colName; %]
                            [% var colModel = renderModel.colModel; %]
                            [% for (var key in colName) { %]
                            <td data-name="[%= colModel[key].name %]">[%= colName[key] %]</td>
                            [% } %]
                        </tr>
                    </thead>
                </table>
            </div>

            [% var bodyClass = gridInstance.bodyClass(renderModel); %]
            [% var bodyStyle = gridInstance.bodyStyle(renderModel); %]
            <div class="grid-bdiv" style="width: 1170px; height: 200px;">
                <table class="grid-btable" style="width: 1800px;">
                    <tr class="firstrow">
                        [% if (renderModel.rowNumber) { %]
                        <td></td>
                        [% } %]
                        [% colModel = renderModel.colModel; %]
                        [% for (var j in colModel) { %]
                        <td></td>
                        [% } %]
                    </tr>
                </table>
            </div>

        </div>
    </script>

    <!--
        depends: [rowDataList, renderModel, gridInstance]
        renderPageModel: {
            startIndex: {number},
            endIndex: {number},
            pageData: [...]
        },
        gridInstance: {{object}}}
    -->
    <script id="outGridDataTemplate" type="text/template">
        [% var rowDataList =  renderPageModel.pageData; %]
        [% for(var i = 0, length = rowDataList.length; i < length; i++) { %]

            [% var rowData = rowDataList[i]; %]
            [% var rowId = rowData[renderModel.keyName]; %]
            [% var rowAttr = gridInstance.rowAttr(rowData, rowId); %]
            [% var rowClass = gridInstance.rowClass(rowData, rowId); %]
            [% var rowStyle = gridInstance.rowStyle(rowData, rowId); %]

        <tr id="[%= rowData[renderModel.keyName] %]"
            [%= rowAttr %]
            class="[%= rowClass %]"
            style="[%= rowStyle %]"
        >
            [% if (renderModel.rowNumber) { %]
            <td>[%= renderPageModel.startIndex + i + 1%]</td>
            [% } %]
            [% colModel = renderModel.colModel; %]
            [% for (var j in colModel) { %]
            [%      var colName = colModel[j]["name"]; %]
            [%      var cellModel = colModel[j]; %]
            [%      var cellValue = rowData[colName]; %]
            [%      var cellAttr = gridInstance.cellAttr(cellModel, cellValue, rowData, rowId); %]
            [%      var cellClass = gridInstance.cellClass(cellModel, cellValue, rowData, rowId); %]
            [%      var cellStyle = gridInstance.cellStyle(cellModel, cellValue, rowData, rowId); %]
            [%      var cellFormatValue = gridInstance.format(cellModel, cellValue, rowData, rowId); %]
            <td data-name="[%= colName %]"
                [%= cellAttr %]
                class="[%= cellClass %]"
                style="[%= cellStyle %]"
            >
                [%= cellFormatValue %]
            </td>
            [% } %]
        </tr>
        [% } %]
    </script>
</head>
<body>
<div id="grid">

</div>

</body>
</html>